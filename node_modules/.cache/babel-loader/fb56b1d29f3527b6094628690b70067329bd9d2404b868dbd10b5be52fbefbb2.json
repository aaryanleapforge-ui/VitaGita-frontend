{"ast":null,"code":"/**\r\n * Analytics Page\r\n * \r\n * Detailed analytics with charts\r\n */import React,{useState,useEffect}from'react';import api from'../api';import{BarChart,Bar,LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from'recharts';import'./Analytics.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Analytics(){const[popularShloks,setPopularShloks]=useState([]);const[userGrowth,setUserGrowth]=useState([]);const[bookmarksByTheme,setBookmarksByTheme]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchAnalytics();},[]);const fetchAnalytics=async()=>{try{setLoading(true);const[popular,growth,themes]=await Promise.all([api.get('/api/analytics/popular-shloks'),api.get('/api/analytics/user-growth'),api.get('/api/analytics/bookmarks-by-theme')]);if(popular.data.success){setPopularShloks(popular.data.data);}if(growth.data.success){setUserGrowth(growth.data.data);}if(themes.data.success){setBookmarksByTheme(themes.data.data);}}catch(err){console.error('Failed to fetch analytics:',err);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Analytics & Insights\"}),userGrowth.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card chart-card mb-20\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"chart-title\",children:\"User Growth Over Time\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:userGrowth,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"totalUsers\",stroke:\"#0D1B3E\",name:\"Total Users\"}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"newUsers\",stroke:\"#D4AF37\",name:\"New Users\"})]})})]}),bookmarksByTheme.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card chart-card mb-20\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"chart-title\",children:\"Bookmarks by Theme\"}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(BarChart,{data:bookmarksByTheme,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"theme\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"count\",fill:\"#D4AF37\",name:\"Bookmarks\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"card-title\",children:\"Most Bookmarked Shloks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Chapter\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Shlok #\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Theme\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Summary\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Bookmarks\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:popularShloks.map((shlok,index)=>{var _shlok$summary;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:shlok.chapterName}),/*#__PURE__*/_jsx(\"td\",{children:shlok.shlokNum}),/*#__PURE__*/_jsx(\"td\",{children:shlok.theme}),/*#__PURE__*/_jsxs(\"td\",{className:\"summary-cell\",children:[(_shlok$summary=shlok.summary)===null||_shlok$summary===void 0?void 0:_shlok$summary.substring(0,80),\"...\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-success\",children:shlok.bookmarkCount})})]},shlok.key);})})]})})]})]});}export default Analytics;","map":{"version":3,"names":["React","useState","useEffect","api","BarChart","Bar","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","jsx","_jsx","jsxs","_jsxs","Analytics","popularShloks","setPopularShloks","userGrowth","setUserGrowth","bookmarksByTheme","setBookmarksByTheme","loading","setLoading","fetchAnalytics","popular","growth","themes","Promise","all","get","data","success","err","console","error","className","children","length","width","height","strokeDasharray","dataKey","type","stroke","name","fill","map","shlok","index","_shlok$summary","chapterName","shlokNum","theme","summary","substring","bookmarkCount","key"],"sources":["C:/Users/ASUS/Downloads/gita_admin_panel/client/src/pages/Analytics.js"],"sourcesContent":["/**\r\n * Analytics Page\r\n * \r\n * Detailed analytics with charts\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport api from '../api';\r\nimport { BarChart, Bar, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\nimport './Analytics.css';\r\n\r\nfunction Analytics() {\r\n  const [popularShloks, setPopularShloks] = useState([]);\r\n  const [userGrowth, setUserGrowth] = useState([]);\r\n  const [bookmarksByTheme, setBookmarksByTheme] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchAnalytics();\r\n  }, []);\r\n\r\n  const fetchAnalytics = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const [popular, growth, themes] = await Promise.all([\r\n        api.get('/api/analytics/popular-shloks'),\r\n        api.get('/api/analytics/user-growth'),\r\n        api.get('/api/analytics/bookmarks-by-theme')\r\n      ]);\r\n\r\n      if (popular.data.success) {\r\n        setPopularShloks(popular.data.data);\r\n      }\r\n\r\n      if (growth.data.success) {\r\n        setUserGrowth(growth.data.data);\r\n      }\r\n\r\n      if (themes.data.success) {\r\n        setBookmarksByTheme(themes.data.data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch analytics:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-screen\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"analytics-page\">\r\n      <h1 className=\"page-title\">Analytics & Insights</h1>\r\n\r\n      {/* User Growth Chart */}\r\n      {userGrowth.length > 0 && (\r\n        <div className=\"card chart-card mb-20\">\r\n          <h3 className=\"chart-title\">User Growth Over Time</h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <LineChart data={userGrowth}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"date\" />\r\n              <YAxis />\r\n              <Tooltip />\r\n              <Legend />\r\n              <Line type=\"monotone\" dataKey=\"totalUsers\" stroke=\"#0D1B3E\" name=\"Total Users\" />\r\n              <Line type=\"monotone\" dataKey=\"newUsers\" stroke=\"#D4AF37\" name=\"New Users\" />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      )}\r\n\r\n      {/* Bookmarks by Theme */}\r\n      {bookmarksByTheme.length > 0 && (\r\n        <div className=\"card chart-card mb-20\">\r\n          <h3 className=\"chart-title\">Bookmarks by Theme</h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={bookmarksByTheme}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"theme\" />\r\n              <YAxis />\r\n              <Tooltip />\r\n              <Legend />\r\n              <Bar dataKey=\"count\" fill=\"#D4AF37\" name=\"Bookmarks\" />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      )}\r\n\r\n      {/* Popular Shloks Table */}\r\n      <div className=\"card\">\r\n        <h3 className=\"card-title\">Most Bookmarked Shloks</h3>\r\n        <div className=\"table-container\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Rank</th>\r\n                <th>Chapter</th>\r\n                <th>Shlok #</th>\r\n                <th>Theme</th>\r\n                <th>Summary</th>\r\n                <th>Bookmarks</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {popularShloks.map((shlok, index) => (\r\n                <tr key={shlok.key}>\r\n                  <td>{index + 1}</td>\r\n                  <td>{shlok.chapterName}</td>\r\n                  <td>{shlok.shlokNum}</td>\r\n                  <td>{shlok.theme}</td>\r\n                  <td className=\"summary-cell\">{shlok.summary?.substring(0, 80)}...</td>\r\n                  <td>\r\n                    <span className=\"badge badge-success\">\r\n                      {shlok.bookmarkCount}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Analytics;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}